---
title: "[대외활동] 아주대 하계 자율주행 시뮬레이션 교육"
tags:
    - MORAI
    - ROS
    - 자율주행
date: "2025-08-07"
thumbnail: "/assets/img/thumbnail/morai.png"
---
> 본 글은 미래자동차사업단 COSS, 아주대학교, 그리고 MORAI가 주관한 자율주행 교육 프로그램에 참여한 경험을 바탕으로 작성하였습니다. 저작권 문제로 교육 내용보다는 느낀 점에 초점을 맞춘 글입니다.

# 개요
이 교육은 미래자동차사업단, 아주대학교에서 주관했으며 교육은 자율주행 관련 시뮬레이션 기업 [MORAI](https://www.morai.ai/ko)측에서 진행했다.
동아리 선배가 추천해 주셔서 알게 되었고, 모터쇼에서 자율주행 관련 작품이나, 내가 준비 중인 대회나 많은 부분에서 MORAI SIM이 사용되는 것을 보았고 MORAI에 대하여 배운다면 앞으로의 자율주행 공부에 큰 도움이 될 것 같아 신청했다.
총 5일동안의 과정이었으며 3일차까지는 MORAI SIM, ROS, 자율주행에 대한 교육이 진행되었고 4, 5일차는 미니 대회가 진행되었다.

# 1일차

1일차에는 자율주행 개요, MORAI SIM, ROS에 대하여 배웠다.
실습 환경은 AWS 클라우드로 Ubuntu 20.04버전이다.
자율주행 프로세스 과정, 자율주행의 단계, 연구중인 기업 같은 개요들과 인지, 판단, 제어에 사용되는 딥러닝, 2, 3일차에 배울 센서와 HD Map같은 개념들에 대해서 전체적인 흐름을 개념만 배우는 시간이었다.
자동차 관련 교과목들과 대회 준비로 자주 접했던 내용들이었다.

# 2일차

2일차에는 센서, 장애물 인지, HD Map에 대하여 배웠다.
개인적으로 가장 배울게 많았던 날이었다. 현재 준비 중인 대회에서 인지된 장애물에 대한 회피 알고리즘과 제어를 담당하고 있기 때문에 인지부분에 대해서는 소홀했었기 때문이다.
카메라, 3D LiDAR, GPS, IMU 센서들의 과학적 원리를 배우고, MORAI SIM과 ROS를 이용해 실습해보았다. MORAI SIM에서 센서에 대한 많은 옵션들을 이용해 실차의 센서와 가장 유사하게 만드는 것이 상당히 중요함을 느꼈다.

# 3일차

3일차에는 제어, Lane Detection, Collision Avoidance에 대하여 배웠다.
대회에서 주로 다루던 부분이 많아 익숙했던 부분이었다.
Pure Pursuit, Stanley, PID 같은 제어 알고리즘, Lane Detection을 위한 이진화 ROI, BEV, Curve Fitting같은 과정들, A*, Lattice Planning 같은 회피 알고리즘을 이론적으로 배우고 실습해보았다.
미니 대회에서 가장 베이스가 될 글로벌패스를 추종하다가, 로컬패스로 전환하고 복귀하는 로직이 담긴 메인 코드도 다뤘기에 열심히 실습했다.

# 미니 대회

## 대회 정보

미니 대회는 임의로 짜주신 팀으로 구성되었다. 나는 6조로 팀원 구성은 다음과 같다.

|대학교|학과||
|---|---|---|
|국민대|소프트웨어전공|나|
|국민대|자동차공학과|같은 동아리|
|대림대|미래자동차공학부||
|아주대|디지털미디어학과|팀장|
|아주대|전자공학과||

대회의 미션은 신호등 2번, 보행자, 정차 차량 장애물 이었다.
나는 다른 대회에서 정차 장애물을 주로 다뤄본 경험이 있었기에 정차 차량 장애물을 담당하기로 했다.

채점 기준은 다음과 같다.

|항목|패널티 점수|비고|
|---|---|---|
|충돌|회당 -25점|• 정적/동적 장애물과 충돌 시 감점<br>• 충돌 판정은 /Collision_data 기준<br>• 재충돌 시 누적 감점|
|신호등 인지|회당 -20점|• 적색불 상황에서 정지선 통과할 시 감점<br>• 정지선을 넘는 순간에 신호등 상태를 확인하여 판단|
|속도위반|-10점|• 40kph 기준으로 초과할 시 감점<br>• 3초 누적 시 추가 감점|
|Time|-|• 5분 초과 시 실패|
|경로 준수|실패|• 주어진 경로가 아닌 임의의 경로로 주행 시<br>• 강사가 판단|

## 과정

실습에서 배웠던 코드를 기반으로 했기에 Lattice Planning 알고리즘을 이용했다. 실습에서는 작은 장애물을 위한 알고리즘이었기에 파라미터를 조절해 큰 장애물을 피하는 경로도 생성하도록 수정하고, 장애물 충돌 확인 여부에 대한 거리를 장애물과 차량의 크기를 고려해 수정해주니 성공적으로 피하게 되었다.
![정차 차량 장애물 실행 결과 1](https://i.imgur.com/FbvFUqz.png) 
![정차 차량 장애물 실행 결과 2](https://i.imgur.com/WsAnyuE.png)

나의 미션을 성공적을 끝내고 다음은 신호등파트를 도왔다.

신호등은 신호등 앞 구간에서 MORAI에서 제공되는 신호등 정보를 받는 방법으로 해결했다. 카메라를 사용해 좀 더 일반화된 코드를 만들지 못함에 아쉬움이 남았지만 이틀이라는 짧은 기간의 대회이기에 적절한 방법이었다고 생각한다.

보행자 회피는 원하던 로직은 LiDAR를 이용해 보행자를 감지하고 멈추는 방법이었지만, 감지가 성공적으로 되지 않았다. 미니 대회이기 때문에 규칙상 보행자와 충돌만 하지 않으면 되므로 먼저 지나가도 감점은 없어서 보행자보다 차가 먼저 지나가는 방법을 사용하게 되었다.

## 결과

다음은 대회 주행 영상이다. (그 후 약간의 수정은 있었다.)
<iframe width="560" height="315" src="https://www.youtube.com/embed/BUcqYWsSxdw" frameborder="0" allowfullscreen></iframe>

전체 결과는 다음과 같다.

|조|최종주행점수|주행시간|순위|비고|
|---|---|---|---|---|
|1조|100점|1.44.22|2||
|2조|(-)20점|1.04.63|7||
|3조|100점|5.00.00|8|완주 실패|
|4조|35점|46.96|5||
|5조|5점|1.27.09|6||
| <span style="color:red">6조</span> | <span style="color:red">80점</span> | <span style="color:red">1.06.03</span> | <span style="color:red">4</span> | <span style="color:red"></span> |
|7조|100점|1.53.36|3||
|8조|100점|59.01|1||

우리 조는 첫 번째 신호등 구간에서 정지선을 밟아 감점을 당했다.
![정지선 사진](https://i.imgur.com/Yp0wQBf.jpeg)
사진처럼 정지선 부분이 SIM상에 표시가 없었기에 횡단보도 전에서만 서면 된다고 생각했는데 채점 프로그램은 정지선을 밟았다고 판정했다.

저 부분만 아니었다면 주행시간이 짧은 편이라 2등인데 억울함과 아쉬움이 있었다.
하지만 미니 대회라 사전에 주행시간으로 순위를 매긴다는 공지도 없었기에 미리 공지 해주셨다면 다른 팀들의 기록도 더 좋았을 것이기도 하고, 성과가 중요한 대회도 아니었기에 경험과 배움에 만족하기로 했다.

# 마무리

사실 이번 교육으로 새롭게 배운 지식은 많지는 않았다. 그러나 MORAI사용에 대한 팁? 기술? 들을 얻어 가게 되었고, 미니 대회를 통해 한 파트만 알던 내가 조금 더 전체적인 코드의 구조에 익숙하게 되어 만족스러웠다.
또, 미니 대회이지만 결과까지 나온 대회는 처음이었기에 어떤 식으로 대회가 진행되는지, 어떠한 점을 유의해야 할 지에 대해서도 많은 배움이 있었다.

1주 동안 편도 약 2시간 거리의 아주대를 통학함에 어려움도 있었지만 얻어 가는 것이 많아 뿌듯한 교육 기간이었다.

<img src="https://i.imgur.com/uSz5qJb.png" style="width:200px; height:auto;"><span style="color:gray">
이수증도 받았다.